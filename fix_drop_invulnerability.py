#!/usr/bin/env python3
"""
Fix drop hit state progression by reducing invulnerability time.

The problem: 
- Invulnerability = 2 seconds
- Damage window = 2 seconds
- Player can't hit 2nd drop within window because they're invulnerable the whole time

The solution:
- Reduce invulnerability to 1 second
- Now player can hit 2nd drop within the 2-second damage window
"""

# Read the file
with open('Baron-web.tsx', 'r') as f:
    content = f.read()

# Change invulnerability from 2000ms to 1000ms (1 second) for normal drop hits
# This is on line 1745 in the "Normal drop hit" section
old_invulnerability = """        } else {
          // Normal drop hit: 2 seconds invulnerability
          st.invulnerable = true
          st.invulnerableTime = Date.now() + 2000
        }"""

new_invulnerability = """        } else {
          // Normal drop hit: 1 second invulnerability (allows stacking within 2s window)
          st.invulnerable = true
          st.invulnerableTime = Date.now() + 1000
        }"""

content = content.replace(old_invulnerability, new_invulnerability)

# Write back
with open('Baron-web.tsx', 'w') as f:
    f.write(content)

print("✅ Fixed drop hit state progression")
print("  - Reduced invulnerability: 2 seconds → 1 second")
print("  - Damage window remains: 2 seconds")
print("  - Now runner can progress: State 1 → State 2 → State 3 → Dead")
print("")
print("Timeline example:")
print("  0.0s: Hit drop 1 → State 2, invulnerable until 1.0s, window until 2.0s")
print("  1.0s: Invulnerability expires, still within damage window")
print("  1.5s: Hit drop 2 → State 3, invulnerable until 2.5s, window continues")
print("  2.5s: Can hit drop 3 → Dead state (still within extended window)")

